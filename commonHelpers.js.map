{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEpSURBVHgBrZXtEcIgDIZTzp5/3URHcSPpJLpBXcVd+FPwiqQt1y+SUNv3DuUkvA+0SQQg5Jx7WOt8zsBYyudEmXsPuijg3bbtB1ipa/jQYQ+UZVmBpHjyprEvyBTGSjf52zwbssdchBxhTkI4c2vtTTJMxcwgw6RObZReXDycMSYBcTWuQX/6RqcMQpCmIOPNHbG30SKAgkjmU8AJBJ3PpQ5GOO2KCYVFGEaFa9J+EbCEDIAsc5SCTCkFPjWXlHWD2Jvw5MNP2b1HBEzN42OZvhMRwmURly1cCvfrszSlC41PxR6SKjQs3g4Qg6z9PpdBxsitIhWDXrPDcZCtWplHHQEhzY+AiOZ7IJz5qg5iWygK/wjfFwD+T18pdfXe37e0j07jTeTBPZYfWztI8097RKsAAAAASUVORK5CYII=\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport cross from '../img/bi_x-octagon.png';\nimport axios from 'axios';\n\nconst KEY = '42691654-856ee9298c14d5c2eed97729f';\nconst baseURL = ' https://pixabay.com/api/';\n// const loader = document.querySelector('.loader');\n// const loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport async function searchImages(keyword, currentPage, itemsPerPage) {\n  try {\n    const response = await axios.get(\n      `${baseURL}?key=${KEY}&q=${keyword}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${itemsPerPage}&page=${currentPage}`\n    );\n\n    if (response.data.hits.length === 0) {\n      return iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: '#EF4040',\n        messageColor: '#ffffff',\n        position: 'topRight',\n        iconUrl: cross,\n      });\n    }\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      message: `Error${error}`,\n      backgroundColor: '#EF4040',\n      messageColor: '#ffffff',\n      position: 'topRight',\n      iconUrl: cross,\n    });\n  }\n}\n","const gallery = document.querySelector('.gallery');\n\nexport function addMarkup(images) {\n  const markup = images.hits\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\" >\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n      </a>\n      <div class=\"gallery-info-container\">\n          <p class=\"gallery-info\">\n              <span class=\"gallery-info-span\">Likes: <span class=\"numbers-span\">${likes}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info\">\n              <span class=\"gallery-info-span\">Views: <span class=\"numbers-span\">${views}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info\">\n              <span class=\"gallery-info-span\">Comments: <span class=\"numbers-span\">${comments}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info\">\n              <span class=\"gallery-info-span\">Downloads: <span class=\"numbers-span\">${downloads}</span>\n              </span>    \n          </p>\n      </div>\n  </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport cross from './img/bi_x-octagon.png';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { addMarkup } from './js/render-functions.js';\nimport { searchImages } from './js/pixabay-api.js';\n\nconst options = {\n  captionsData: 'alt',\n  captionDelay: 250,\n};\n\nconst lightbox = new SimpleLightbox('.gallery-item a', options);\nlightbox.on('show.simplelightbox');\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet currentPage;\nlet itemsPerPage = 15;\nlet currentQuery;\nlet totalPages;\nlet cardHeight;\n\nform.addEventListener('submit', handleFormSubmit);\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n  currentPage = 1;\n  loadMoreBtn.style.display = 'none';\n  const QUERY = form.elements.query.value.trim();\n\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n\n  if (QUERY === '') {\n    alert('Please enter a keyword to search for an image');\n    return;\n  }\n\n  searchImages(QUERY, currentPage, itemsPerPage)\n    .then(data => {\n      currentQuery = QUERY;\n      totalPages = Math.ceil(data.totalHits / itemsPerPage);\n      addMarkup(data);\n      lightbox.refresh();\n\n      data.totalHits < itemsPerPage\n        ? //думаю, тут не дуже логічно виводити повідомлення \"We're sorry, but you've reached the end of search results.\". Бо й так зрозуміло, що картинок тільки n. Тобто користувач не \"дійшов до краю\".\n          (loadMoreBtn.style.display = 'none')\n        : (loadMoreBtn.style.display = 'block');\n    })\n    .catch(error => {\n      // iziToast.error({\n      //   title: '',\n      // message: `Error${error}`,\n      //   backgroundColor: '#EF4040',\n      //   messageColor: '#ffffff',\n      //   position: 'topRight',\n      //   iconUrl: cross,\n      // });\n      console.log(`Error:${error}`);\n    })\n    .finally(() => {\n      form.reset();\n      loader.style.display = 'none';\n    });\n}\n\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleLoadMore() {\n  loadMoreBtn.style.display = 'none';\n  loader.style.display = 'block';\n  currentPage += 1;\n\n  if (currentPage === totalPages) {\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'none';\n    return iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n\n  try {\n    const response = await searchImages(\n      currentQuery,\n      currentPage,\n      itemsPerPage\n    );\n\n    addMarkup(response);\n    smoothScrollBy();\n    lightbox.refresh();\n    loader.style.display = 'none';\n    loadMoreBtn.style.display = 'block';\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      message: `Error${error}`,\n      backgroundColor: '#EF4040',\n      messageColor: '#ffffff',\n      position: 'topRight',\n      iconUrl: cross,\n    });\n  }\n}\n\nfunction smoothScrollBy() {\n  cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["cross","KEY","baseURL","searchImages","keyword","currentPage","itemsPerPage","response","axios","iziToast","error","gallery","addMarkup","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","options","lightbox","SimpleLightbox","form","loader","loadMoreBtn","currentQuery","totalPages","cardHeight","handleFormSubmit","event","QUERY","data","handleLoadMore","smoothScrollBy"],"mappings":"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"}