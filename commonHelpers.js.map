{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEpSURBVHgBrZXtEcIgDIZTzp5/3URHcSPpJLpBXcVd+FPwiqQt1y+SUNv3DuUkvA+0SQQg5Jx7WOt8zsBYyudEmXsPuijg3bbtB1ipa/jQYQ+UZVmBpHjyprEvyBTGSjf52zwbssdchBxhTkI4c2vtTTJMxcwgw6RObZReXDycMSYBcTWuQX/6RqcMQpCmIOPNHbG30SKAgkjmU8AJBJ3PpQ5GOO2KCYVFGEaFa9J+EbCEDIAsc5SCTCkFPjWXlHWD2Jvw5MNP2b1HBEzN42OZvhMRwmURly1cCvfrszSlC41PxR6SKjQs3g4Qg6z9PpdBxsitIhWDXrPDcZCtWplHHQEhzY+AiOZ7IJz5qg5iWygK/wjfFwD+T18pdfXe37e0j07jTeTBPZYfWztI8097RKsAAAAASUVORK5CYII=\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport cross from '../img/bi_x-octagon.png';\nimport axios from 'axios';\n\nconst KEY = '42691654-856ee9298c14d5c2eed97729f';\nconst baseURL = ' https://pixabay.com/api/';\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport async function searchImages(keyword, currentPage, itemsPerPage) {\n  try {\n    const response = await axios.get(\n      `${baseURL}?key=${KEY}&q=${keyword}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${itemsPerPage}&page=${currentPage}`\n    );\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: '#EF4040',\n        messageColor: '#ffffff',\n        position: 'topRight',\n        iconUrl: cross,\n      });\n    } else {\n      loader.style.display = 'none';\n      return response.data;\n    }\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      message: `Error${error}`,\n      backgroundColor: '#EF4040',\n      messageColor: '#ffffff',\n      position: 'topRight',\n      iconUrl: cross,\n    });\n  }\n}\n","const gallery = document.querySelector('.gallery');\n\nexport function addMarkup(images) {\n  const markup = images.hits\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\" >\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n      </a>\n      <div class=\"gallery-info-container\">\n          <p class=\"gallery-info\">\n              <span class=\"gallery-info-span\">Likes: <span class=\"numbers-span\">${likes}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info\">\n              <span class=\"gallery-info-span\">Views: <span class=\"numbers-span\">${views}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info\">\n              <span class=\"gallery-info-span\">Comments: <span class=\"numbers-span\">${comments}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info\">\n              <span class=\"gallery-info-span\">Downloads: <span class=\"numbers-span\">${downloads}</span>\n              </span>    \n          </p>\n      </div>\n  </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport cross from './img/bi_x-octagon.png';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { addMarkup } from './js/render-functions.js';\nimport { searchImages } from './js/pixabay-api.js';\n\nconst options = {\n  captionsData: 'alt',\n  captionDelay: 250,\n};\n\nconst lightbox = new SimpleLightbox('.gallery-item a', options);\nlightbox.on('show.simplelightbox');\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet currentPage;\nlet itemsPerPage = 15;\nlet currentQuery;\nlet totalPages;\nlet cardHeight;\n\nform.addEventListener('submit', handleFormSubmit);\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n  currentPage = 1``;\n  loadMoreBtn.style.display = 'none';\n  const QUERY = form.elements.query.value.trim();\n\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n\n  if (QUERY === '') {\n    alert('Please enter a keyword to search for an image');\n    return;\n  }\n\n  searchImages(QUERY, currentPage, itemsPerPage)\n    .then(data => {\n      currentQuery = QUERY;\n      totalPages = Math.ceil(data.totalHits / itemsPerPage);\n      addMarkup(data);\n      loadMoreBtn.style.display = 'block';\n      lightbox.refresh();\n    })\n    .catch(error => {\n      iziToast.error({\n        title: '',\n        message: `Error${error}`,\n        backgroundColor: '#EF4040',\n        messageColor: '#ffffff',\n        position: 'topRight',\n        iconUrl: cross,\n      });\n    })\n    .finally(() => {\n      form.reset();\n      loader.style.display = 'none';\n    });\n}\n\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleLoadMore() {\n  loadMoreBtn.style.display = 'none';\n  loader.style.display = 'block';\n  currentPage += 1;\n\n  if (currentPage === totalPages) {\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'none';\n    return iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n\n  try {\n    const response = await searchImages(\n      currentQuery,\n      currentPage,\n      itemsPerPage\n    );\n\n    addMarkup(response);\n    smoothScrollBy();\n    lightbox.refresh();\n    loader.style.display = 'none';\n    loadMoreBtn.style.display = 'block';\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      message: `Error${error}`,\n      backgroundColor: '#EF4040',\n      messageColor: '#ffffff',\n      position: 'topRight',\n      iconUrl: cross,\n    });\n  }\n}\n\nfunction smoothScrollBy() {\n  cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["cross","KEY","baseURL","loader","searchImages","keyword","currentPage","itemsPerPage","response","axios","iziToast","error","gallery","addMarkup","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","options","lightbox","SimpleLightbox","form","loadMoreBtn","currentQuery","totalPages","cardHeight","handleFormSubmit","event","QUERY","data","handleLoadMore","smoothScrollBy"],"mappings":"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"}